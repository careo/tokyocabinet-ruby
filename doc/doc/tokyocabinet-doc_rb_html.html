<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>File: tokyocabinet-doc_rb.html [RDoc Documentation]</title>

	<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet" />

	<script src="../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>
</head>

<body class="file">
	<div id="metadata">
		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../COPYING.html">COPYING</a></li>
				
					<li class="file"><a href="../MANIFEST.html">MANIFEST</a></li>
				
					<li class="file"><a href="../doc/TokyoCabinet_html.html">TokyoCabinet.html</a></li>
				
					<li class="file"><a href="../doc/TokyoCabinet/ADB_html.html">ADB.html</a></li>
				
					<li class="file"><a href="../doc/TokyoCabinet/BDB_html.html">BDB.html</a></li>
				
					<li class="file"><a href="../doc/TokyoCabinet/BDBCUR_html.html">BDBCUR.html</a></li>
				
					<li class="file"><a href="../doc/TokyoCabinet/FDB_html.html">FDB.html</a></li>
				
					<li class="file"><a href="../doc/TokyoCabinet/HDB_html.html">HDB.html</a></li>
				
					<li class="file"><a href="../doc/TokyoCabinet/TDB_html.html">TDB.html</a></li>
				
					<li class="file"><a href="../doc/TokyoCabinet/TDBQRY_html.html">TDBQRY.html</a></li>
				
					<li class="file"><a href="../doc/created_rid.html">created.rid</a></li>
				
					<li class="file"><a href="../doc/index_html.html">index.html</a></li>
				
					<li class="file"><a href="../doc/js/darkfish_js.html">darkfish.js</a></li>
				
					<li class="file"><a href="../doc/js/jquery_js.html">jquery.js</a></li>
				
					<li class="file"><a href="../doc/js/quicksearch_js.html">quicksearch.js</a></li>
				
					<li class="file"><a href="../doc/js/thickbox-compressed_js.html">thickbox-compressed.js</a></li>
				
					<li class="file"><a href="../doc/rdoc_css.html">rdoc.css</a></li>
				
					<li class="file"><a href="../doc/tokyocabinet-doc_rb_html.html">tokyocabinet-doc_rb.html</a></li>
				
					<li class="file"><a href="../makedoc_sh.html">makedoc.sh</a></li>
				
					<li class="file"><a href="../overview_rd.html">overview.rd</a></li>
				
					<li class="file"><a href="../package_sh.html">package.sh</a></li>
				
					<li class="file"><a href="../tokyocabinet_gemspec.html">tokyocabinet.gemspec</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../TokyoCabinet.html">TokyoCabinet</a></li>
				
					<li><a href="../TokyoCabinet/ADB.html">TokyoCabinet::ADB</a></li>
				
					<li><a href="../TokyoCabinet/ADB_data.html">TokyoCabinet::ADB_data</a></li>
				
					<li><a href="../TokyoCabinet/BDB.html">TokyoCabinet::BDB</a></li>
				
					<li><a href="../TokyoCabinet/BDBCUR.html">TokyoCabinet::BDBCUR</a></li>
				
					<li><a href="../TokyoCabinet/BDBCUR_data.html">TokyoCabinet::BDBCUR_data</a></li>
				
					<li><a href="../TokyoCabinet/BDB_data.html">TokyoCabinet::BDB_data</a></li>
				
					<li><a href="../TokyoCabinet/FDB.html">TokyoCabinet::FDB</a></li>
				
					<li><a href="../TokyoCabinet/FDB_data.html">TokyoCabinet::FDB_data</a></li>
				
					<li><a href="../TokyoCabinet/HDB.html">TokyoCabinet::HDB</a></li>
				
					<li><a href="../TokyoCabinet/HDB_data.html">TokyoCabinet::HDB_data</a></li>
				
					<li><a href="../TokyoCabinet/TDB.html">TokyoCabinet::TDB</a></li>
				
					<li><a href="../TokyoCabinet/TDBQRY.html">TokyoCabinet::TDBQRY</a></li>
				
					<li><a href="../TokyoCabinet/TDBQRY_data.html">TokyoCabinet::TDBQRY_data</a></li>
				
					<li><a href="../TokyoCabinet/TDB_data.html">TokyoCabinet::TDB_data</a></li>
				
					<li><a href="../Object.html">Object</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<p>
<?xml version=&#8220;1.0&#8220; encoding=&#8220;utf-8&#8221;?> <!DOCTYPE
html PUBLIC &#8220;-//W3C//DTD XHTML 1.0 Strict//EN&#8220;
</p>
<pre>
        &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
</pre>
<p>
<html xmlns=&#8220;<a
href="http://www.w3.org/1999/xhtml">www.w3.org/1999/xhtml</a>&#8220;
xml:lang=&#8220;en&#8221; lang=&#8220;en&#8221;> <head>
</p>
<pre>
        &lt;meta content=&quot;text/html; charset=utf-8&quot; http-equiv=&quot;Content-Type&quot; /&gt;

        &lt;title&gt;File: tokyocabinet-doc.rb [Tokyo Cabinet]&lt;/title&gt;

        &lt;link type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;./rdoc.css&quot; rel=&quot;stylesheet&quot; /&gt;

        &lt;script src=&quot;./js/jquery.js&quot; type=&quot;text/javascript&quot;
                charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;./js/thickbox-compressed.js&quot; type=&quot;text/javascript&quot;
                charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;./js/quicksearch.js&quot; type=&quot;text/javascript&quot;
                charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;./js/darkfish.js&quot; type=&quot;text/javascript&quot;
                charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
</pre>
<p>
</head>
</p>
<p>
<body class=&#8220;file file-popup&#8221;>
</p>
<pre>
        &lt;div id=&quot;metadata&quot;&gt;
                &lt;dl&gt;
                        &lt;dt class=&quot;modified-date&quot;&gt;Last Modified&lt;/dt&gt;
                        &lt;dd class=&quot;modified-date&quot;&gt;2009-05-19 04:04:17 -0300&lt;/dd&gt;

                        &lt;dt class=&quot;requires&quot;&gt;Requires&lt;/dt&gt;
                        &lt;dd class=&quot;requires&quot;&gt;
                                &lt;ul&gt;

                                &lt;/ul&gt;
                        &lt;/dd&gt;

                &lt;/dl&gt;
        &lt;/div&gt;

        &lt;div id=&quot;documentation&quot;&gt;

                &lt;div class=&quot;description&quot;&gt;
                        &lt;h2&gt;Description&lt;/h2&gt;
                        &lt;h1&gt;Ruby Binding of Tokyo Cabinet&lt;/h1&gt;
</pre>
<p>
<p> Tokyo Cabinet: a modern implementation of DBM </p>
<h2>INTRODUCTION</h2> <p> Tokyo Cabinet is a library of routines for
managing a database. The database is a simple data file containing records,
each is a pair of a key and a value. Every key and value is serial bytes
with variable length. Both binary data and character string can be used as
a key and a value. There is neither concept of data tables nor data types.
Records are organized in hash table, B+ tree, or fixed-length array. </p>
<p> As for database of hash table, each key must be unique within a
database, so it is impossible to store two or more records with a key
overlaps. The following access methods are provided to the database:
storing a record with a key and a value, deleting a record by a key,
retrieving a record by a key. Moreover, traversal access to every key are
provided, although the order is arbitrary. These access methods are similar
to ones of DBM (or its followers: NDBM and GDBM) library defined in the
UNIX standard. Tokyo Cabinet is an alternative for DBM because of its
higher performance. </p> <p> As for database of B+ tree, records whose keys
are duplicated can be stored. Access methods of storing, deleting, and
retrieving are provided as with the database of hash table. Records are
stored in order by a comparison function assigned by a user. It is possible
to access each record with the cursor in ascending or descending order.
According to this mechanism, forward matching search for strings and range
search for integers are realized. </p> <p> As for database of fixed-length
array, records are stored with unique natural numbers. It is impossible to
store two or more records with a key overlaps. Moreover, the length of each
record is limited by the specified length. Provided operations are the same
as ones of hash database. </p> <p> Table database is also provided as a
variant of hash database. Each record is identified by the primary key and
has a set of named columns. Although there is no concept of data schema, it
is possible to search for records with complex conditions efficiently by
using indices of arbitrary columns. </p> <h3>Setting</h3> <p> Install the
latest version of Tokyo Cabinet beforehand and get the package of the Ruby
binding of Tokyo Cabinet. </p> <p> Enter the directory of the extracted
package then perform installation. </p> <pre>
</p>
<pre>
 ruby extconf.rb
 make
 su
 make install
</pre>
<p>
</pre> <p> The package `tokyocabinet&#8217; should be loaded in each source
file of application programs. </p> <pre>
</p>
<pre>
 require 'tokyocabinet'
</pre>
<p>
</pre> <p> All symbols of Tokyo Cabinet are defined in the module
`TokyoCabinet&#8217;. You can access them without any prefix by including
the module. </p> <pre>
</p>
<pre>
 include TokyoCabinet
</pre>
<p>
</pre> <h1>EXAMPLE</h1> <p> The following code is an example to use a hash
database. </p> <pre>
</p>
<pre>
 require 'tokyocabinet'
 include TokyoCabinet

 # create the object
 hdb = HDB::new

 # open the database
 if !hdb.open(&amp;quot;casket.tch&amp;quot;, HDB::OWRITER | HDB::OCREAT)
   ecode = hdb.ecode
   STDERR.printf(&amp;quot;open error: %s\n&amp;quot;, hdb.errmsg(ecode))
 end

 # store records
 if !hdb.put(&amp;quot;foo&amp;quot;, &amp;quot;hop&amp;quot;) ||
     !hdb.put(&amp;quot;bar&amp;quot;, &amp;quot;step&amp;quot;) ||
     !hdb.put(&amp;quot;baz&amp;quot;, &amp;quot;jump&amp;quot;)
   ecode = hdb.ecode
   STDERR.printf(&amp;quot;put error: %s\n&amp;quot;, hdb.errmsg(ecode))
 end

 # retrieve records
 value = hdb.get(&amp;quot;foo&amp;quot;)
 if value
   printf(&amp;quot;%s\n&amp;quot;, value)
 else
   ecode = hdb.ecode
   STDERR.printf(&amp;quot;get error: %s\n&amp;quot;, hdb.errmsg(ecode))
 end

 # traverse records
 hdb.iterinit
 while key = hdb.iternext
   value = hdb.get(key)
   if value
     printf(&amp;quot;%s:%s\n&amp;quot;, key, value)
   end
 end

 # hash-like usage
 hdb[&amp;quot;quux&amp;quot;] = &amp;quot;touchdown&amp;quot;
 printf(&amp;quot;%s\n&amp;quot;, hdb[&amp;quot;quux&amp;quot;])
 hdb.each do |key, value|
   printf(&amp;quot;%s:%s\n&amp;quot;, key, value)
 end

 # close the database
 if !hdb.close
   ecode = hdb.ecode
   STDERR.printf(&amp;quot;close error: %s\n&amp;quot;, hdb.errmsg(ecode))
 end
</pre>
<p>
</pre> <p> The following code is an example to use a B+ tree database. </p>
<pre>
</p>
<pre>
 require 'tokyocabinet'
 include TokyoCabinet

 # create the object
 bdb = BDB::new

 # open the database
 if !bdb.open(&amp;quot;casket.tcb&amp;quot;, BDB::OWRITER | BDB::OCREAT)
   ecode = bdb.ecode
   STDERR.printf(&amp;quot;open error: %s\n&amp;quot;, bdb.errmsg(ecode))
 end

 # store records
 if !bdb.put(&amp;quot;foo&amp;quot;, &amp;quot;hop&amp;quot;) ||
     !bdb.put(&amp;quot;bar&amp;quot;, &amp;quot;step&amp;quot;) ||
     !bdb.put(&amp;quot;baz&amp;quot;, &amp;quot;jump&amp;quot;)
   ecode = bdb.ecode
   STDERR.printf(&amp;quot;put error: %s\n&amp;quot;, bdb.errmsg(ecode))
 end

 # retrieve records
 value = bdb.get(&amp;quot;foo&amp;quot;)
 if value
   printf(&amp;quot;%s\n&amp;quot;, value)
 else
   ecode = bdb.ecode
   STDERR.printf(&amp;quot;get error: %s\n&amp;quot;, bdb.errmsg(ecode))
 end

 # traverse records
 cur = BDBCUR::new(bdb)
 cur.first
 while key = cur.key
   value = cur.val
   if value
     printf(&amp;quot;%s:%s\n&amp;quot;, key, value)
   end
   cur.next
 end

 # hash-like usage
 bdb[&amp;quot;quux&amp;quot;] = &amp;quot;touchdown&amp;quot;
 printf(&amp;quot;%s\n&amp;quot;, bdb[&amp;quot;quux&amp;quot;])
 bdb.each do |key, value|
   printf(&amp;quot;%s:%s\n&amp;quot;, key, value)
 end

 # close the database
 if !bdb.close
   ecode = bdb.ecode
   STDERR.printf(&amp;quot;close error: %s\n&amp;quot;, bdb.errmsg(ecode))
 end
</pre>
<p>
</pre> <p> The following code is an example to use a fixed-length database.
</p> <pre>
</p>
<pre>
 require 'tokyocabinet'
 include TokyoCabinet

 # create the object
 fdb = FDB::new

 # open the database
 if !fdb.open(&amp;quot;casket.tcf&amp;quot;, FDB::OWRITER | FDB::OCREAT)
   ecode = fdb.ecode
   STDERR.printf(&amp;quot;open error: %s\n&amp;quot;, fdb.errmsg(ecode))
 end

 # store records
 if !fdb.put(1, &amp;quot;one&amp;quot;) ||
     !fdb.put(12, &amp;quot;twelve&amp;quot;) ||
     !fdb.put(144, &amp;quot;one forty four&amp;quot;)
   ecode = fdb.ecode
   STDERR.printf(&amp;quot;put error: %s\n&amp;quot;, fdb.errmsg(ecode))
 end

 # retrieve records
 value = fdb.get(1)
 if value
   printf(&amp;quot;%s\n&amp;quot;, value)
 else
   ecode = fdb.ecode
   STDERR.printf(&amp;quot;get error: %s\n&amp;quot;, fdb.errmsg(ecode))
 end

 # traverse records
 fdb.iterinit
 while key = fdb.iternext
   value = fdb.get(key)
   if value
     printf(&amp;quot;%s:%s\n&amp;quot;, key, value)
   end
 end

 # hash-like usage
 fdb[1728] = &amp;quot;seventeen twenty eight&amp;quot;
 printf(&amp;quot;%s\n&amp;quot;, fdb[1728])
 fdb.each do |key, value|
   printf(&amp;quot;%s:%s\n&amp;quot;, key, value)
 end

 # close the database
 if !fdb.close
   ecode = fdb.ecode
   STDERR.printf(&amp;quot;close error: %s\n&amp;quot;, fdb.errmsg(ecode))
 end
</pre>
<p>
</pre> <p> The following code is an example to use a table database. </p>
<pre>
</p>
<pre>
 require 'tokyocabinet'
 include TokyoCabinet

 # create the object
 tdb = TDB::new

 # open the database
 if !tdb.open(&amp;quot;casket.tct&amp;quot;, TDB::OWRITER | TDB::OCREAT)
   ecode = tdb.ecode
   STDERR.printf(&amp;quot;open error: %s\n&amp;quot;, tdb.errmsg(ecode))
 end

 # store a record
 pkey = tdb.genuid
 cols = { &amp;quot;name&amp;quot; =&amp;gt; &amp;quot;mikio&amp;quot;, &amp;quot;age&amp;quot; =&amp;gt; &amp;quot;30&amp;quot;, &amp;quot;lang&amp;quot; =&amp;gt; &amp;quot;ja,en,c&amp;quot; }
 if !tdb.put(pkey, cols)
   ecode = tdb.ecode
   STDERR.printf(&amp;quot;get error: %s\n&amp;quot;, tdb.errmsg(ecode))
 end

 # store another record
 cols = { &amp;quot;name&amp;quot; =&amp;gt; &amp;quot;falcon&amp;quot;, &amp;quot;age&amp;quot; =&amp;gt; &amp;quot;31&amp;quot;, &amp;quot;lang&amp;quot; =&amp;gt; &amp;quot;ja&amp;quot;, &amp;quot;skill&amp;quot; =&amp;gt; &amp;quot;cook,blog&amp;quot; }
 if !tdb.put(&amp;quot;x12345&amp;quot;, cols)
   ecode = tdb.ecode
   STDERR.printf(&amp;quot;get error: %s\n&amp;quot;, tdb.errmsg(ecode))
 end

 # search for records
 qry = TDBQRY::new(tdb)
 qry.addcond(&amp;quot;age&amp;quot;, TDBQRY::QCNUMGE, &amp;quot;20&amp;quot;)
 qry.addcond(&amp;quot;lang&amp;quot;, TDBQRY::QCSTROR, &amp;quot;ja,en&amp;quot;)
 qry.setorder(&amp;quot;name&amp;quot;, TDBQRY::QOSTRASC)
 qry.setlimit(10)
 res = qry.search
 res.each do |rkey|
   rcols = tdb.get(rkey)
   printf(&amp;quot;name:%s\n&amp;quot;, rcols[&amp;quot;name&amp;quot;])
 end

 # hash-like usage
 tdb[&amp;quot;joker&amp;quot;] = { &amp;quot;name&amp;quot; =&amp;gt; &amp;quot;ozma&amp;quot;, &amp;quot;lang&amp;quot; =&amp;gt; &amp;quot;en&amp;quot;, &amp;quot;skill&amp;quot; =&amp;gt; &amp;quot;song,dance&amp;quot; }
 printf(&amp;quot;%s\n&amp;quot;, tdb[&amp;quot;joker&amp;quot;][&amp;quot;name&amp;quot;])
 tdb.each do |key, value|
   printf(&amp;quot;%s:%s\n&amp;quot;, key, value[&amp;quot;name&amp;quot;])
 end

 # close the database
 if !tdb.close
   ecode = tdb.ecode
   STDERR.printf(&amp;quot;close error: %s\n&amp;quot;, tdb.errmsg(ecode))
 end
</pre>
<p>
</pre> <p> The following code is an example to use an abstract database.
</p> <pre>
</p>
<pre>
 require 'tokyocabinet'
 include TokyoCabinet

 # create the object
 adb = ADB::new

 # open the database
 if !adb.open(&amp;quot;casket.tch&amp;quot;)
   STDERR.printf(&amp;quot;open error\n&amp;quot;)
 end

 # store records
 if !adb.put(&amp;quot;foo&amp;quot;, &amp;quot;hop&amp;quot;) ||
     !adb.put(&amp;quot;bar&amp;quot;, &amp;quot;step&amp;quot;) ||
     !adb.put(&amp;quot;baz&amp;quot;, &amp;quot;jump&amp;quot;)
   STDERR.printf(&amp;quot;put error\n&amp;quot;)
 end

 # retrieve records
 value = adb.get(&amp;quot;foo&amp;quot;)
 if value
   printf(&amp;quot;%s\n&amp;quot;, value)
 else
   STDERR.printf(&amp;quot;get error\n&amp;quot;)
 end

 # traverse records
 adb.iterinit
 while key = adb.iternext
   value = adb.get(key)
   if value
     printf(&amp;quot;%s:%s\n&amp;quot;, key, value)
   end
 end

 # hash-like usage
 adb[&amp;quot;quux&amp;quot;] = &amp;quot;touchdown&amp;quot;
 printf(&amp;quot;%s\n&amp;quot;, adb[&amp;quot;quux&amp;quot;])
 adb.each do |key, value|
   printf(&amp;quot;%s:%s\n&amp;quot;, key, value)
 end

 # close the database
 if !adb.close
   STDERR.printf(&amp;quot;close error\n&amp;quot;)
 end
</pre>
<p>
</pre> <h2>LICENSE</h2> <pre>
</p>
<pre>
 Copyright (C) 2006-2009 Mikio Hirabayashi
 All rights reserved.
</pre>
<p>
</pre> <p> Tokyo Cabinet is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public License as
published by the Free Software Foundation; either version 2.1 of the
License or any later version. Tokyo Cabinet is distributed in the hope that
it will be useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Lesser General Public License for more details. You should have
received a copy of the GNU Lesser General Public License along with Tokyo
Cabinet; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA 02111-1307 USA. </p>
</p>
<pre>
                &lt;/div&gt;

        &lt;/div&gt;
</pre>
<p>
</body> </html>
</p>

	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>
</body>
</html>

