<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: Object</title>

	<link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link"><a href="Object.html">Object</a></p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#M000034">#eprint</a></li>
					
					<li><a href="#M000025">#eprint</a></li>
					
					<li><a href="#M000047">#eprint</a></li>
					
					<li><a href="#M000003">#eprint</a></li>
					
					<li><a href="#M000012">#eprint</a></li>
					
					<li><a href="#M000023">#main</a></li>
					
					<li><a href="#M000045">#main</a></li>
					
					<li><a href="#M000001">#main</a></li>
					
					<li><a href="#M000031">#main</a></li>
					
					<li><a href="#M000009">#main</a></li>
					
					<li><a href="#M000000">#memoryusage</a></li>
					
					<li><a href="#M000015">#procmisc</a></li>
					
					<li><a href="#M000039">#procmisc</a></li>
					
					<li><a href="#M000044">#procmisc</a></li>
					
					<li><a href="#M000022">#procmisc</a></li>
					
					<li><a href="#M000055">#procmisc</a></li>
					
					<li><a href="#M000042">#procread</a></li>
					
					<li><a href="#M000053">#procread</a></li>
					
					<li><a href="#M000032">#procread</a></li>
					
					<li><a href="#M000010">#procread</a></li>
					
					<li><a href="#M000020">#procread</a></li>
					
					<li><a href="#M000021">#procremove</a></li>
					
					<li><a href="#M000014">#procremove</a></li>
					
					<li><a href="#M000054">#procremove</a></li>
					
					<li><a href="#M000036">#procremove</a></li>
					
					<li><a href="#M000043">#procremove</a></li>
					
					<li><a href="#M000008">#procwrite</a></li>
					
					<li><a href="#M000052">#procwrite</a></li>
					
					<li><a href="#M000019">#procwrite</a></li>
					
					<li><a href="#M000041">#procwrite</a></li>
					
					<li><a href="#M000030">#procwrite</a></li>
					
					<li><a href="#M000051">#runmisc</a></li>
					
					<li><a href="#M000018">#runmisc</a></li>
					
					<li><a href="#M000029">#runmisc</a></li>
					
					<li><a href="#M000007">#runmisc</a></li>
					
					<li><a href="#M000040">#runmisc</a></li>
					
					<li><a href="#M000016">#runread</a></li>
					
					<li><a href="#M000037">#runread</a></li>
					
					<li><a href="#M000049">#runread</a></li>
					
					<li><a href="#M000027">#runread</a></li>
					
					<li><a href="#M000005">#runread</a></li>
					
					<li><a href="#M000017">#runremove</a></li>
					
					<li><a href="#M000006">#runremove</a></li>
					
					<li><a href="#M000038">#runremove</a></li>
					
					<li><a href="#M000050">#runremove</a></li>
					
					<li><a href="#M000028">#runremove</a></li>
					
					<li><a href="#M000004">#runwrite</a></li>
					
					<li><a href="#M000035">#runwrite</a></li>
					
					<li><a href="#M000048">#runwrite</a></li>
					
					<li><a href="#M000026">#runwrite</a></li>
					
					<li><a href="#M000013">#runwrite</a></li>
					
					<li><a href="#M000011">#usage</a></li>
					
					<li><a href="#M000024">#usage</a></li>
					
					<li><a href="#M000033">#usage</a></li>
					
					<li><a href="#M000002">#usage</a></li>
					
					<li><a href="#M000046">#usage</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="./COPYING.html">COPYING</a></li>
				
					<li class="file"><a href="./MANIFEST.html">MANIFEST</a></li>
				
					<li class="file"><a href="./doc/TokyoCabinet_html.html">TokyoCabinet.html</a></li>
				
					<li class="file"><a href="./doc/TokyoCabinet/ADB_html.html">ADB.html</a></li>
				
					<li class="file"><a href="./doc/TokyoCabinet/BDB_html.html">BDB.html</a></li>
				
					<li class="file"><a href="./doc/TokyoCabinet/BDBCUR_html.html">BDBCUR.html</a></li>
				
					<li class="file"><a href="./doc/TokyoCabinet/FDB_html.html">FDB.html</a></li>
				
					<li class="file"><a href="./doc/TokyoCabinet/HDB_html.html">HDB.html</a></li>
				
					<li class="file"><a href="./doc/TokyoCabinet/TDB_html.html">TDB.html</a></li>
				
					<li class="file"><a href="./doc/TokyoCabinet/TDBQRY_html.html">TDBQRY.html</a></li>
				
					<li class="file"><a href="./doc/created_rid.html">created.rid</a></li>
				
					<li class="file"><a href="./doc/index_html.html">index.html</a></li>
				
					<li class="file"><a href="./doc/js/darkfish_js.html">darkfish.js</a></li>
				
					<li class="file"><a href="./doc/js/jquery_js.html">jquery.js</a></li>
				
					<li class="file"><a href="./doc/js/quicksearch_js.html">quicksearch.js</a></li>
				
					<li class="file"><a href="./doc/js/thickbox-compressed_js.html">thickbox-compressed.js</a></li>
				
					<li class="file"><a href="./doc/rdoc_css.html">rdoc.css</a></li>
				
					<li class="file"><a href="./doc/tokyocabinet-doc_rb_html.html">tokyocabinet-doc_rb.html</a></li>
				
					<li class="file"><a href="./makedoc_sh.html">makedoc.sh</a></li>
				
					<li class="file"><a href="./overview_rd.html">overview.rd</a></li>
				
					<li class="file"><a href="./package_sh.html">package.sh</a></li>
				
					<li class="file"><a href="./tokyocabinet_gemspec.html">tokyocabinet.gemspec</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./TokyoCabinet.html">TokyoCabinet</a></li>
				
					<li><a href="./TokyoCabinet/ADB.html">TokyoCabinet::ADB</a></li>
				
					<li><a href="./TokyoCabinet/ADB_data.html">TokyoCabinet::ADB_data</a></li>
				
					<li><a href="./TokyoCabinet/BDB.html">TokyoCabinet::BDB</a></li>
				
					<li><a href="./TokyoCabinet/BDBCUR.html">TokyoCabinet::BDBCUR</a></li>
				
					<li><a href="./TokyoCabinet/BDBCUR_data.html">TokyoCabinet::BDBCUR_data</a></li>
				
					<li><a href="./TokyoCabinet/BDB_data.html">TokyoCabinet::BDB_data</a></li>
				
					<li><a href="./TokyoCabinet/FDB.html">TokyoCabinet::FDB</a></li>
				
					<li><a href="./TokyoCabinet/FDB_data.html">TokyoCabinet::FDB_data</a></li>
				
					<li><a href="./TokyoCabinet/HDB.html">TokyoCabinet::HDB</a></li>
				
					<li><a href="./TokyoCabinet/HDB_data.html">TokyoCabinet::HDB_data</a></li>
				
					<li><a href="./TokyoCabinet/TDB.html">TokyoCabinet::TDB</a></li>
				
					<li><a href="./TokyoCabinet/TDBQRY.html">TokyoCabinet::TDBQRY</a></li>
				
					<li><a href="./TokyoCabinet/TDBQRY_data.html">TokyoCabinet::TDBQRY_data</a></li>
				
					<li><a href="./TokyoCabinet/TDB_data.html">TokyoCabinet::TDB_data</a></li>
				
					<li><a href="./Object.html">Object</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">Object</h1>

		<div id="description">
			
		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="eprint-method" class="method-detail ">
				<a name="M000034"></a>

				<div class="method-heading">
				
					<span class="method-name">eprint</span><span
						class="method-args">(hdb, func)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print error message of hash database
</p>
					

					
					<div class="method-source-code"
						id="eprint-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 58</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-identifier">func</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: %s: %s: %s\n&quot;</span>, <span class="ruby-identifier">$progname</span>, <span class="ruby-identifier">path</span> <span class="ruby-value">? </span><span class="ruby-identifier">path</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;-&quot;</span>, <span class="ruby-identifier">func</span>, <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">errmsg</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="eprint-method" class="method-detail ">
				<a name="M000025"></a>

				<div class="method-heading">
				
					<span class="method-name">eprint</span><span
						class="method-args">(fdb, func)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print error message of fixed-length database
</p>
					

					
					<div class="method-source-code"
						id="eprint-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 57</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-identifier">func</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: %s: %s: %s\n&quot;</span>, <span class="ruby-identifier">$progname</span>, <span class="ruby-identifier">path</span> <span class="ruby-value">? </span><span class="ruby-identifier">path</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;-&quot;</span>, <span class="ruby-identifier">func</span>, <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">errmsg</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="eprint-method" class="method-detail ">
				<a name="M000047"></a>

				<div class="method-heading">
				
					<span class="method-name">eprint</span><span
						class="method-args">(tdb, func)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print error message of table database
</p>
					

					
					<div class="method-source-code"
						id="eprint-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 58</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-identifier">func</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: %s: %s: %s\n&quot;</span>, <span class="ruby-identifier">$progname</span>, <span class="ruby-identifier">path</span> <span class="ruby-value">? </span><span class="ruby-identifier">path</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;-&quot;</span>, <span class="ruby-identifier">func</span>, <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">errmsg</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="eprint-method" class="method-detail ">
				<a name="M000003"></a>

				<div class="method-heading">
				
					<span class="method-name">eprint</span><span
						class="method-args">(adb, func)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print error message of abstract database
</p>
					

					
					<div class="method-source-code"
						id="eprint-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 57</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-identifier">func</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: %s: %s: error\n&quot;</span>, <span class="ruby-identifier">$progname</span>, <span class="ruby-identifier">path</span> <span class="ruby-value">? </span><span class="ruby-identifier">path</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;-&quot;</span>, <span class="ruby-identifier">func</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="eprint-method" class="method-detail ">
				<a name="M000012"></a>

				<div class="method-heading">
				
					<span class="method-name">eprint</span><span
						class="method-args">(bdb, func)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print error message of B+ tree database
</p>
					

					
					<div class="method-source-code"
						id="eprint-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 58</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-identifier">func</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: %s: %s: %s\n&quot;</span>, <span class="ruby-identifier">$progname</span>, <span class="ruby-identifier">path</span> <span class="ruby-value">? </span><span class="ruby-identifier">path</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;-&quot;</span>, <span class="ruby-identifier">func</span>, <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">errmsg</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="main-method" class="method-detail ">
				<a name="M000023"></a>

				<div class="method-heading">
				
					<span class="method-name">main</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
main routine
</p>
					

					
					<div class="method-source-code"
						id="main-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 24</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">main</span>
  <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;write&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runwrite</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;read&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runread</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;remove&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runremove</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;misc&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runmisc</span>
  <span class="ruby-keyword kw">else</span>
    <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="main-method" class="method-detail ">
				<a name="M000045"></a>

				<div class="method-heading">
				
					<span class="method-name">main</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
main routine
</p>
					

					
					<div class="method-source-code"
						id="main-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 24</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">main</span>
  <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;write&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runwrite</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;read&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runread</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;remove&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runremove</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;misc&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runmisc</span>
  <span class="ruby-keyword kw">else</span>
    <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="main-method" class="method-detail ">
				<a name="M000001"></a>

				<div class="method-heading">
				
					<span class="method-name">main</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
main routine
</p>
					

					
					<div class="method-source-code"
						id="main-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 24</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">main</span>
  <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;write&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runwrite</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;read&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runread</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;remove&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runremove</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;misc&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runmisc</span>
  <span class="ruby-keyword kw">else</span>
    <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="main-method" class="method-detail ">
				<a name="M000031"></a>

				<div class="method-heading">
				
					<span class="method-name">main</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
main routine
</p>
					

					
					<div class="method-source-code"
						id="main-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 24</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">main</span>
  <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;write&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runwrite</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;read&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runread</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;remove&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runremove</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;misc&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runmisc</span>
  <span class="ruby-keyword kw">else</span>
    <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="main-method" class="method-detail ">
				<a name="M000009"></a>

				<div class="method-heading">
				
					<span class="method-name">main</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
main routine
</p>
					

					
					<div class="method-source-code"
						id="main-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 24</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">main</span>
  <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;write&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runwrite</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;read&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runread</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;remove&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runremove</span>
  <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;misc&quot;</span>
    <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">runmisc</span>
  <span class="ruby-keyword kw">else</span>
    <span class="ruby-identifier">usage</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="memoryusage-method" class="method-detail ">
				<a name="M000000"></a>

				<div class="method-heading">
				
					<span class="method-name">memoryusage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p class="missing-docs">(Not documented)</p>
					

					
					<div class="method-source-code"
						id="memoryusage-source">
<pre>
<span class="ruby-comment cmt"># File memsize.rb, line 6</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">memoryusage</span>()
  <span class="ruby-identifier">status</span> = <span class="ruby-node">`cat /proc/#{$$}/status`</span>
  <span class="ruby-identifier">lines</span> = <span class="ruby-identifier">status</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^VmRSS:/</span>
      <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/.*:\s*(\d+).*/</span>, <span class="ruby-value str">'\1'</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">/</span> <span class="ruby-value">1024.0</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">return</span> <span class="ruby-value">-1</span>;
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procmisc-method" class="method-detail ">
				<a name="M000015"></a>

				<div class="method-heading">
				
					<span class="method-name">procmisc</span><span
						class="method-args">(name, rnum)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform misc command
</p>
					

					
					<div class="method-source-code"
						id="procmisc-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 260</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Miscellaneous Test&gt;\n  name=%s  rnum=%d\n\n&quot;</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">adb</span> = <span class="ruby-constant">ADB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;writing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;reading:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;removing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking iterator:\n&quot;</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">iterinit</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;iterinit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">key</span> = <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">iternext</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">fwmkeys</span>(<span class="ruby-value str">&quot;0&quot;</span>, <span class="ruby-value">10</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">10</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">10</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;fwmkeys&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking counting:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;[%d]&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">addint</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>)
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">adddouble</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">sync</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;sync&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">optimize</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;optimize&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">npath</span> = <span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;-tmp&quot;</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">copy</span>(<span class="ruby-identifier">npath</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;copy&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-identifier">unlink</span>(<span class="ruby-identifier">npath</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">vanish</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;vanish&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking transaction commit:\n&quot;</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">tranbegin</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%d&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">putcat</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;putcat&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">trancommit</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;trancommit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking transaction abort:\n&quot;</span>)
  <span class="ruby-identifier">ornum</span> = <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-identifier">osize</span> = <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">tranbegin</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%d&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">putcat</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;putcat&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">tranabort</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;trancommit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">ornum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">osize</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like updating:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;[%d]&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-identifier">rnd</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-value">4</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">adb</span>[<span class="ruby-identifier">buf</span>] = <span class="ruby-identifier">buf</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">adb</span>[<span class="ruby-identifier">buf</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
      <span class="ruby-identifier">res</span> = <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>
      <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like iterator:\n&quot;</span>)
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tkey</span>, <span class="ruby-identifier">tvalue</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">size</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procmisc-method" class="method-detail ">
				<a name="M000039"></a>

				<div class="method-heading">
				
					<span class="method-name">procmisc</span><span
						class="method-args">(path, rnum, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform misc command
</p>
					

					
					<div class="method-source-code"
						id="procmisc-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 301</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Miscellaneous Test&gt;\n  path=%s  rnum=%d  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">fdb</span> = <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">tune</span>(<span class="ruby-value">10</span>, <span class="ruby-value">1024</span> <span class="ruby-operator">+</span> <span class="ruby-value">32</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">rnum</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;tune&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OCREAT</span> <span class="ruby-operator">|</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OTRUNC</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;writing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;reading:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;removing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking iterator:\n&quot;</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">iterinit</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;iterinit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">key</span> = <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">iternext</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">range</span>(<span class="ruby-value str">&quot;[min,max]&quot;</span>, <span class="ruby-value">10</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">10</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">10</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;range&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking counting:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;[%d]&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">addint</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">EKEEP</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;addint&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">adddouble</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">EKEEP</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;adddouble&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">sync</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;sync&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">optimize</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;optimize&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">npath</span> = <span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;-tmp&quot;</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">copy</span>(<span class="ruby-identifier">npath</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;copy&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-identifier">unlink</span>(<span class="ruby-identifier">npath</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">vanish</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;vanish&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking transaction commit:\n&quot;</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">tranbegin</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%d&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">putcat</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;putcat&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">trancommit</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;trancommit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking transaction abort:\n&quot;</span>)
  <span class="ruby-identifier">ornum</span> = <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-identifier">ofsiz</span> = <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">fsiz</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">tranbegin</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%d&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">putcat</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;putcat&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">tranabort</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;trancommit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">ornum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">fsiz</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">ofsiz</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like updating:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;[%d]&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-identifier">rnd</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-value">4</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">fdb</span>[<span class="ruby-identifier">buf</span>] = <span class="ruby-identifier">buf</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">fdb</span>[<span class="ruby-identifier">buf</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
      <span class="ruby-identifier">res</span> = <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>
      <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like iterator:\n&quot;</span>)
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tkey</span>, <span class="ruby-identifier">tvalue</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procmisc-method" class="method-detail ">
				<a name="M000044"></a>

				<div class="method-heading">
				
					<span class="method-name">procmisc</span><span
						class="method-args">(path, rnum, opts, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform misc command
</p>
					

					
					<div class="method-source-code"
						id="procmisc-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 335</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Miscellaneous Test&gt;\n  path=%s  rnum=%d  opts=%d  omode=%d\n\n&quot;</span>,
         <span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">hdb</span> = <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">tune</span>(<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">50</span>, <span class="ruby-value">2</span>, <span class="ruby-value">-1</span>, <span class="ruby-identifier">opts</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;tune&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">setcache</span>(<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;setcache&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">setxmsiz</span>(<span class="ruby-identifier">rnum</span> <span class="ruby-operator">*</span> <span class="ruby-value">4</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;setxmsiz&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">setdfunit</span>(<span class="ruby-value">8</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;setdfunit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OCREAT</span> <span class="ruby-operator">|</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OTRUNC</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;writing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;reading:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;removing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking iterator:\n&quot;</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">iterinit</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;iterinit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">key</span> = <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">iternext</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">fwmkeys</span>(<span class="ruby-value str">&quot;0&quot;</span>, <span class="ruby-value">10</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">10</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">10</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;fwmkeys&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking counting:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;[%d]&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">addint</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">EKEEP</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;addint&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">adddouble</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">EKEEP</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;adddouble&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">sync</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;sync&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">optimize</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;optimize&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">npath</span> = <span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;-tmp&quot;</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">copy</span>(<span class="ruby-identifier">npath</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;copy&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-identifier">unlink</span>(<span class="ruby-identifier">npath</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">vanish</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;vanish&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking transaction commit:\n&quot;</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">tranbegin</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%d&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">putcat</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;putcat&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">trancommit</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;trancommit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking transaction abort:\n&quot;</span>)
  <span class="ruby-identifier">ornum</span> = <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-identifier">ofsiz</span> = <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">fsiz</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">tranbegin</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%d&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">putcat</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;putcat&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">tranabort</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;trancommit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">ornum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">fsiz</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">ofsiz</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like updating:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;[%d]&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-identifier">rnd</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-value">4</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">hdb</span>[<span class="ruby-identifier">buf</span>] = <span class="ruby-identifier">buf</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">hdb</span>[<span class="ruby-identifier">buf</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
      <span class="ruby-identifier">res</span> = <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>
      <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like iterator:\n&quot;</span>)
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tkey</span>, <span class="ruby-identifier">tvalue</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procmisc-method" class="method-detail ">
				<a name="M000022"></a>

				<div class="method-heading">
				
					<span class="method-name">procmisc</span><span
						class="method-args">(path, rnum, opts, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform misc command
</p>
					

					
					<div class="method-source-code"
						id="procmisc-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 333</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Miscellaneous Test&gt;\n  path=%s  rnum=%d  opts=%d  omode=%d\n\n&quot;</span>,
         <span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">bdb</span> = <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">tune</span>(<span class="ruby-value">10</span>, <span class="ruby-value">10</span>, <span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">50</span>, <span class="ruby-value">2</span>, <span class="ruby-value">-1</span>, <span class="ruby-identifier">opts</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;tune&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">setcache</span>(<span class="ruby-value">128</span>, <span class="ruby-value">256</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;setcache&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">setxmsiz</span>(<span class="ruby-identifier">rnum</span> <span class="ruby-operator">*</span> <span class="ruby-value">4</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;setxmsiz&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">setdfunit</span>(<span class="ruby-value">8</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;setdfunit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OCREAT</span> <span class="ruby-operator">|</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OTRUNC</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;writing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;reading:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;removing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking cursor:\n&quot;</span>)
  <span class="ruby-identifier">cur</span> = <span class="ruby-constant">BDBCUR</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>(<span class="ruby-identifier">bdb</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cur</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;cur::first&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">key</span> = <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">key</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">val</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;cur::val&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">next</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">fwmkeys</span>(<span class="ruby-value str">&quot;0&quot;</span>, <span class="ruby-value">10</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">10</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">10</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;fwmkeys&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking counting:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;[%d]&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">addint</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">EKEEP</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;addint&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">adddouble</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">EKEEP</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;adddouble&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">sync</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;sync&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">optimize</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;optimize&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">npath</span> = <span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;-tmp&quot;</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">copy</span>(<span class="ruby-identifier">npath</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;copy&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-identifier">unlink</span>(<span class="ruby-identifier">npath</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">vanish</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;vanish&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;random writing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">i</span>))
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">putdup</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;putdup&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;cursor updating:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
      <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">jump</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">j</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">10</span>
        <span class="ruby-identifier">key</span> = <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">key</span>
        <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">key</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">3</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
          <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">out</span>
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-identifier">cpmode</span> = <span class="ruby-constant">BDBCUR</span><span class="ruby-operator">::</span><span class="ruby-constant">CPCURRENT</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">3</span>)
          <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">cpmode</span>)
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">next</span>
        <span class="ruby-identifier">j</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">tranbegin</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">putdup</span>(<span class="ruby-value str">&quot;::1&quot;</span>, <span class="ruby-value str">&quot;1&quot;</span>)
  <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">putdup</span>(<span class="ruby-value str">&quot;::2&quot;</span>, <span class="ruby-value str">&quot;2a&quot;</span>)
  <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">putdup</span>(<span class="ruby-value str">&quot;::2&quot;</span>, <span class="ruby-value str">&quot;2b&quot;</span>)
  <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">putdup</span>(<span class="ruby-value str">&quot;::3&quot;</span>, <span class="ruby-value str">&quot;3&quot;</span>)
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">jump</span>(<span class="ruby-value str">&quot;::2&quot;</span>)
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">put</span>(<span class="ruby-value str">&quot;2A&quot;</span>)
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">put</span>(<span class="ruby-value str">&quot;2-&quot;</span>, <span class="ruby-constant">BDBCUR</span><span class="ruby-operator">::</span><span class="ruby-constant">CPBEFORE</span>)
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">put</span>(<span class="ruby-value str">&quot;2+&quot;</span>)
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">next</span>
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">next</span>
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">put</span>(<span class="ruby-value str">&quot;mid&quot;</span>, <span class="ruby-constant">BDBCUR</span><span class="ruby-operator">::</span><span class="ruby-constant">CPBEFORE</span>)
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">put</span>(<span class="ruby-value str">&quot;2C&quot;</span>, <span class="ruby-constant">BDBCUR</span><span class="ruby-operator">::</span><span class="ruby-constant">CPAFTER</span>)
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">prev</span>
  <span class="ruby-identifier">cur</span>.<span class="ruby-identifier">out</span>
  <span class="ruby-identifier">vals</span> = <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">getlist</span>(<span class="ruby-value str">&quot;::2&quot;</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">vals</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">4</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;getlist&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">pvals</span> = [ <span class="ruby-value str">&quot;hop&quot;</span>, <span class="ruby-value str">&quot;step&quot;</span>, <span class="ruby-value str">&quot;jump&quot;</span> ]
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">putlist</span>(<span class="ruby-value str">&quot;::1&quot;</span>, <span class="ruby-identifier">pvals</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;putlist&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">outlist</span>(<span class="ruby-value str">&quot;::1&quot;</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;outlist&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">trancommit</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;trancommit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">tranbegin</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">tranabort</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like updating:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;[%d]&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-identifier">rnd</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-value">4</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">bdb</span>[<span class="ruby-identifier">buf</span>] = <span class="ruby-identifier">buf</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;hoge&quot;</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">bdb</span>[<span class="ruby-identifier">buf</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
      <span class="ruby-identifier">res</span> = <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>
      <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like iterator:\n&quot;</span>)
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tkey</span>, <span class="ruby-identifier">tvalue</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procmisc-method" class="method-detail ">
				<a name="M000055"></a>

				<div class="method-heading">
				
					<span class="method-name">procmisc</span><span
						class="method-args">(path, rnum, opts, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform misc command
</p>
					

					
					<div class="method-source-code"
						id="procmisc-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 367</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Miscellaneous Test&gt;\n  path=%s  rnum=%d  opts=%d  omode=%d\n\n&quot;</span>,
         <span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">tdb</span> = <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">tune</span>(<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">50</span>, <span class="ruby-value">2</span>, <span class="ruby-value">-1</span>, <span class="ruby-identifier">opts</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;tune&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setcache</span>(<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>, <span class="ruby-value">128</span>, <span class="ruby-value">256</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setcache&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setxmsiz</span>(<span class="ruby-identifier">rnum</span> <span class="ruby-operator">*</span> <span class="ruby-value">4</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setxmsiz&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setdfunit</span>(<span class="ruby-value">8</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setdfunit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OCREAT</span> <span class="ruby-operator">|</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OTRUNC</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setindex</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ITDECIMAL</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setindex&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setindex</span>(<span class="ruby-value str">&quot;str&quot;</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ITLEXICAL</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setindex&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setindex</span>(<span class="ruby-value str">&quot;num&quot;</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ITDECIMAL</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setindex&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;writing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">id</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">genuid</span>
    <span class="ruby-identifier">cols</span> = {
      <span class="ruby-value str">&quot;str&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id</span>,
      <span class="ruby-value str">&quot;num&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">id</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>,
      <span class="ruby-value str">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">32</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>,
    }
    <span class="ruby-identifier">vbuf</span> = <span class="ruby-value str">&quot;&quot;</span>
    <span class="ruby-identifier">num</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-value">5</span>)
    <span class="ruby-identifier">pt</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">j</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">num</span>
      <span class="ruby-identifier">pt</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">5</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">vbuf</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;,&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">vbuf</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">vbuf</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">pt</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">cols</span>[<span class="ruby-value str">&quot;flag&quot;</span>] = <span class="ruby-identifier">vbuf</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">vbuf</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">cols</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;reading:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">i</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;removing:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">i</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking iterator:\n&quot;</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">iterinit</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;iterinit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">pkey</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">iternext</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">pkey</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">fwmkeys</span>(<span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-value">10</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking counting:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;i:%d&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">addint</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;addint&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">adddouble</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-value">1</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;adddouble&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">sync</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;sync&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">optimize</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;optimize&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">npath</span> = <span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;-tmp&quot;</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">copy</span>(<span class="ruby-identifier">npath</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;copy&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-node">&quot;#{npath}.idx.*&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tpath</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span>(<span class="ruby-identifier">tpath</span>)
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span>(<span class="ruby-identifier">npath</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;searching:\n&quot;</span>)
  <span class="ruby-identifier">qry</span> = <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>(<span class="ruby-identifier">tdb</span>)
  <span class="ruby-identifier">names</span> = [ <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;str&quot;</span>, <span class="ruby-value str">&quot;num&quot;</span>, <span class="ruby-value str">&quot;type&quot;</span>, <span class="ruby-value str">&quot;flag&quot;</span>, <span class="ruby-value str">&quot;c1&quot;</span> ]
  <span class="ruby-identifier">ops</span> = [ <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCSTREQ</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCSTRINC</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCSTRBW</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCSTREW</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCSTRAND</span>,
          <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCSTROR</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCSTROREQ</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCSTRRX</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNUMEQ</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNUMGT</span>,
          <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNUMGE</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNUMLT</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNUMLE</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNUMBT</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNUMOREQ</span> ]
  <span class="ruby-identifier">types</span> = [ <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QOSTRASC</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QOSTRDESC</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QONUMASC</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QONUMDESC</span> ]
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">qry</span> = <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>(<span class="ruby-identifier">tdb</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">10</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">cnum</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-value">4</span>)
    <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">j</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">cnum</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-identifier">names</span>[<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">names</span>.<span class="ruby-identifier">length</span>)]
      <span class="ruby-identifier">op</span> = <span class="ruby-identifier">ops</span>[<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">ops</span>.<span class="ruby-identifier">length</span>)]
      <span class="ruby-identifier">op</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNEGATE</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">20</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">op</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNOIDX</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">20</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">expr</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">i</span>).<span class="ruby-identifier">to_s</span>
      <span class="ruby-identifier">expr</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;,&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">i</span>).<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">expr</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;,&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">i</span>).<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">qry</span>.<span class="ruby-identifier">addcond</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">op</span>, <span class="ruby-identifier">expr</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">3</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-identifier">names</span>[<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">names</span>.<span class="ruby-identifier">length</span>)]
      <span class="ruby-identifier">type</span> = <span class="ruby-identifier">types</span>[<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">types</span>.<span class="ruby-identifier">length</span>)]
      <span class="ruby-identifier">qry</span>.<span class="ruby-identifier">setorder</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">qry</span>.<span class="ruby-identifier">setlimit</span>(<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">i</span>), <span class="ruby-identifier">rand</span>(<span class="ruby-value">10</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">3</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">res</span> = <span class="ruby-identifier">qry</span>.<span class="ruby-identifier">search</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">qry</span> = <span class="ruby-constant">TDBQRY</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tdb</span>)
  <span class="ruby-identifier">qry</span>.<span class="ruby-identifier">addcond</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCSTRBW</span>, <span class="ruby-value str">&quot;i:&quot;</span>)
  <span class="ruby-identifier">qry</span>.<span class="ruby-identifier">setorder</span>(<span class="ruby-value str">&quot;_num&quot;</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QONUMDESC</span>)
  <span class="ruby-identifier">ires</span> = <span class="ruby-identifier">qry</span>.<span class="ruby-identifier">search</span>
  <span class="ruby-identifier">irnum</span> = <span class="ruby-identifier">ires</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">itnum</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-identifier">icnt</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">qry</span>.<span class="ruby-identifier">proc</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pkey</span>, <span class="ruby-identifier">cols</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">icnt</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">cols</span>[<span class="ruby-value str">&quot;icnt&quot;</span>] = <span class="ruby-identifier">icnt</span>
    <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QPPUT</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rv</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;qry::proc&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">qry</span>.<span class="ruby-identifier">addcond</span>(<span class="ruby-value str">&quot;icnt&quot;</span>, <span class="ruby-constant">TDBQRY</span><span class="ruby-operator">::</span><span class="ruby-constant">QCNUMGT</span>, <span class="ruby-value">0</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">qry</span>.<span class="ruby-identifier">searchout</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;qry::searchout&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">itnum</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">irnum</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">vanish</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;vanish&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking transaction commit:\n&quot;</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">tranbegin</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">id</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">addint</span>(<span class="ruby-identifier">id</span>, <span class="ruby-value">1</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;addint&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">id</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">trancommit</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;trancommit&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking transaction abort:\n&quot;</span>)
  <span class="ruby-identifier">ornum</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-identifier">ofsiz</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">fsiz</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">tranbegin</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;tranbegin&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">id</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">addint</span>(<span class="ruby-identifier">id</span>, <span class="ruby-value">1</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;addint&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">id</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">ecode</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOREC</span>
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">tranabort</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;tranabort&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">ornum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">fsiz</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">ofsiz</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;(validation)&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like updating:\n&quot;</span>)
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;[%d]&quot;</span>, <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">rnum</span>))
    <span class="ruby-identifier">rnd</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-value">4</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">cols</span> = {
        <span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">buf</span>,
        <span class="ruby-value str">&quot;num&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">i</span>,
      }
      <span class="ruby-identifier">tdb</span>[<span class="ruby-identifier">buf</span>] = <span class="ruby-identifier">cols</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">tdb</span>[<span class="ruby-identifier">buf</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
      <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rnd</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>
      <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">buf</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;checking hash-like iterator:\n&quot;</span>)
  <span class="ruby-identifier">inum</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tkey</span>, <span class="ruby-identifier">tvalue</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">inum</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">inum</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">inum</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span>
  <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procread-method" class="method-detail ">
				<a name="M000042"></a>

				<div class="method-heading">
				
					<span class="method-name">procread</span><span
						class="method-args">(path, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform read command
</p>
					

					
					<div class="method-source-code"
						id="procread-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 261</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Reading Test&gt;\n  path=%s  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">hdb</span> = <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OREADER</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procread-method" class="method-detail ">
				<a name="M000053"></a>

				<div class="method-heading">
				
					<span class="method-name">procread</span><span
						class="method-args">(path, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform read command
</p>
					

					
					<div class="method-source-code"
						id="procread-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 295</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Reading Test&gt;\n  path=%s  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">tdb</span> = <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OREADER</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">i</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procread-method" class="method-detail ">
				<a name="M000032"></a>

				<div class="method-heading">
				
					<span class="method-name">procread</span><span
						class="method-args">(path, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform read command
</p>
					

					
					<div class="method-source-code"
						id="procread-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 227</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Reading Test&gt;\n  path=%s  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">fdb</span> = <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OREADER</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procread-method" class="method-detail ">
				<a name="M000010"></a>

				<div class="method-heading">
				
					<span class="method-name">procread</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform read command
</p>
					

					
					<div class="method-source-code"
						id="procread-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 186</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Reading Test&gt;\n  name=%s\n\n&quot;</span>, <span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">adb</span> = <span class="ruby-constant">ADB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">size</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procread-method" class="method-detail ">
				<a name="M000020"></a>

				<div class="method-heading">
				
					<span class="method-name">procread</span><span
						class="method-args">(path, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform read command
</p>
					

					
					<div class="method-source-code"
						id="procread-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 259</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Reading Test&gt;\n  path=%s  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">bdb</span> = <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OREADER</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;get&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procremove-method" class="method-detail ">
				<a name="M000021"></a>

				<div class="method-heading">
				
					<span class="method-name">procremove</span><span
						class="method-args">(path, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform remove command
</p>
					

					
					<div class="method-source-code"
						id="procremove-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 296</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Removing Test&gt;\n  path=%s  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">bdb</span> = <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procremove-method" class="method-detail ">
				<a name="M000014"></a>

				<div class="method-heading">
				
					<span class="method-name">procremove</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform remove command
</p>
					

					
					<div class="method-source-code"
						id="procremove-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 223</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Removing Test&gt;\n  name=%s\n\n&quot;</span>, <span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">adb</span> = <span class="ruby-constant">ADB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">size</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procremove-method" class="method-detail ">
				<a name="M000054"></a>

				<div class="method-heading">
				
					<span class="method-name">procremove</span><span
						class="method-args">(path, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform remove command
</p>
					

					
					<div class="method-source-code"
						id="procremove-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 331</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Removing Test&gt;\n  path=%s  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">tdb</span> = <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">i</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procremove-method" class="method-detail ">
				<a name="M000036"></a>

				<div class="method-heading">
				
					<span class="method-name">procremove</span><span
						class="method-args">(path, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform remove command
</p>
					

					
					<div class="method-source-code"
						id="procremove-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 264</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Removing Test&gt;\n  path=%s  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">fdb</span> = <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procremove-method" class="method-detail ">
				<a name="M000043"></a>

				<div class="method-heading">
				
					<span class="method-name">procremove</span><span
						class="method-args">(path, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform remove command
</p>
					

					
					<div class="method-source-code"
						id="procremove-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 298</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Removing Test&gt;\n  path=%s  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">hdb</span> = <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">out</span>(<span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;out&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procwrite-method" class="method-detail ">
				<a name="M000008"></a>

				<div class="method-heading">
				
					<span class="method-name">procwrite</span><span
						class="method-args">(name, rnum)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform write command
</p>
					

					
					<div class="method-source-code"
						id="procwrite-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 150</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Writing Test&gt;\n  name=%s  rnum=%d\n\n&quot;</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">adb</span> = <span class="ruby-constant">ADB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">adb</span>.<span class="ruby-identifier">size</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">adb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">adb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procwrite-method" class="method-detail ">
				<a name="M000052"></a>

				<div class="method-heading">
				
					<span class="method-name">procwrite</span><span
						class="method-args">(path, rnum, bnum, apow, fpow, opts, iflags, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform write command
</p>
					

					
					<div class="method-source-code"
						id="procwrite-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 220</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">iflags</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Writing Test&gt;\n  path=%s  rnum=%d  bnum=%d  apow=%d  fpow=%d  opts=%d  iflags=%d&quot;</span> <span class="ruby-operator">+</span>
         <span class="ruby-value str">&quot;  omode=%d\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">iflags</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">tdb</span> = <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">tune</span>(<span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;tune&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OCREAT</span> <span class="ruby-operator">|</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OTRUNC</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">iflags</span> <span class="ruby-operator">&amp;</span> (<span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">0</span>)) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setindex</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ITDECIMAL</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setindex&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">iflags</span> <span class="ruby-operator">&amp;</span> (<span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">1</span>)) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setindex</span>(<span class="ruby-value str">&quot;str&quot;</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ITLEXICAL</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setindex&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">iflags</span> <span class="ruby-operator">&amp;</span> (<span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">2</span>)) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setindex</span>(<span class="ruby-value str">&quot;num&quot;</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ITDECIMAL</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setindex&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">iflags</span> <span class="ruby-operator">&amp;</span> (<span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">3</span>)) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setindex</span>(<span class="ruby-value str">&quot;type&quot;</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ITDECIMAL</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setindex&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">iflags</span> <span class="ruby-operator">&amp;</span> (<span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">4</span>)) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">setindex</span>(<span class="ruby-value str">&quot;flag&quot;</span>, <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ITLEXICAL</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;setindex&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">id</span> = <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">genuid</span>
    <span class="ruby-identifier">cols</span> = {
      <span class="ruby-value str">&quot;str&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id</span>,
      <span class="ruby-value str">&quot;num&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">id</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>,
      <span class="ruby-value str">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">32</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>,
    }
    <span class="ruby-identifier">vbuf</span> = <span class="ruby-value str">&quot;&quot;</span>
    <span class="ruby-identifier">num</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-value">5</span>)
    <span class="ruby-identifier">pt</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">j</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">num</span>
      <span class="ruby-identifier">pt</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">5</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">vbuf</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;,&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">vbuf</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">vbuf</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">pt</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">cols</span>[<span class="ruby-value str">&quot;flag&quot;</span>] = <span class="ruby-identifier">vbuf</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">vbuf</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">cols</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">tdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procwrite-method" class="method-detail ">
				<a name="M000019"></a>

				<div class="method-heading">
				
					<span class="method-name">procwrite</span><span
						class="method-args">(path, rnum, lmemb, nmemb, bnum, apow, fpow, opts, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform write command
</p>
					

					
					<div class="method-source-code"
						id="procwrite-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 217</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">lmemb</span>, <span class="ruby-identifier">nmemb</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Writing Test&gt;\n  path=%s  rnum=%d  lmemb=%d  nmemb=%d  bnum=%d  apow=%d  fpow=%d&quot;</span> <span class="ruby-operator">+</span>
         <span class="ruby-value str">&quot;  opts=%d  omode=%d\n\n&quot;</span>,
         <span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">lmemb</span>, <span class="ruby-identifier">nmemb</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">bdb</span> = <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">tune</span>(<span class="ruby-identifier">lmemb</span>, <span class="ruby-identifier">nmemb</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;tune&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OCREAT</span> <span class="ruby-operator">|</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OTRUNC</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">bdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procwrite-method" class="method-detail ">
				<a name="M000041"></a>

				<div class="method-heading">
				
					<span class="method-name">procwrite</span><span
						class="method-args">(path, rnum, bnum, apow, fpow, opts, omode, as)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform write command
</p>
					

					
					<div class="method-source-code"
						id="procwrite-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 212</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>, <span class="ruby-identifier">as</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Writing Test&gt;\n  path=%s  rnum=%d  bnum=%d  apow=%d  fpow=%d  opts=%d&quot;</span> <span class="ruby-operator">+</span>
         <span class="ruby-value str">&quot;  omode=%d  as=%s\n\n&quot;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>, <span class="ruby-identifier">as</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">hdb</span> = <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">tune</span>(<span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;tune&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OCREAT</span> <span class="ruby-operator">|</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OTRUNC</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">as</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">putasync</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;putasync&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
        <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
        <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">break</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">hdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="procwrite-method" class="method-detail ">
				<a name="M000030"></a>

				<div class="method-heading">
				
					<span class="method-name">procwrite</span><span
						class="method-args">(path, rnum, width, limsiz, omode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
perform write command
</p>
					

					
					<div class="method-source-code"
						id="procwrite-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 186</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">width</span>, <span class="ruby-identifier">limsiz</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;&lt;Writing Test&gt;\n  path=%s  rnum=%d  width=%d  limsiz=%d  omode=%d\n\n&quot;</span>,
         <span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">width</span>, <span class="ruby-identifier">limsiz</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">stime</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">fdb</span> = <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">tune</span>(<span class="ruby-identifier">width</span>, <span class="ruby-identifier">limsiz</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;tune&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OWRITER</span> <span class="ruby-operator">|</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OCREAT</span> <span class="ruby-operator">|</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OTRUNC</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">omode</span>)
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;open&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">rnum</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%08d&quot;</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">buf</span>, <span class="ruby-identifier">buf</span>)
      <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;put&quot;</span>)
      <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">break</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">250</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">250</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">print</span>(<span class="ruby-value str">'.'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> (<span class="ruby-identifier">rnum</span> <span class="ruby-operator">/</span> <span class="ruby-value">10</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot; (%08d)\n&quot;</span>, <span class="ruby-identifier">i</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;record number: %d\n&quot;</span>, <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">rnum</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;size: %d\n&quot;</span>, <span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">fsiz</span>)
  <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fdb</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-identifier">eprint</span>(<span class="ruby-identifier">fdb</span>, <span class="ruby-value str">&quot;close&quot;</span>)
    <span class="ruby-identifier">err</span> = <span class="ruby-keyword kw">true</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;time: %.3f\n&quot;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">stime</span>)
  <span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s\n\n&quot;</span>, <span class="ruby-identifier">err</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;error&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;ok&quot;</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">err</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runmisc-method" class="method-detail ">
				<a name="M000051"></a>

				<div class="method-heading">
				
					<span class="method-name">runmisc</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of misc command
</p>
					

					
					<div class="method-source-code"
						id="runmisc-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 181</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runmisc</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">opts</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tl&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TLARGE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-td&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TDEFLATE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tb&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TBZIP</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tt&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TTCBS</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runmisc-method" class="method-detail ">
				<a name="M000018"></a>

				<div class="method-heading">
				
					<span class="method-name">runmisc</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of misc command
</p>
					

					
					<div class="method-source-code"
						id="runmisc-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 178</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runmisc</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">opts</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tl&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TLARGE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-td&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TDEFLATE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tb&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TBZIP</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tt&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TTCBS</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runmisc-method" class="method-detail ">
				<a name="M000029"></a>

				<div class="method-heading">
				
					<span class="method-name">runmisc</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of misc command
</p>
					

					
					<div class="method-source-code"
						id="runmisc-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 156</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runmisc</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runmisc-method" class="method-detail ">
				<a name="M000007"></a>

				<div class="method-heading">
				
					<span class="method-name">runmisc</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of misc command
</p>
					

					
					<div class="method-source-code"
						id="runmisc-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 127</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runmisc</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">rnum</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runmisc-method" class="method-detail ">
				<a name="M000040"></a>

				<div class="method-heading">
				
					<span class="method-name">runmisc</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of misc command
</p>
					

					
					<div class="method-source-code"
						id="runmisc-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 173</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runmisc</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">opts</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tl&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TLARGE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-td&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TDEFLATE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tb&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TBZIP</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tt&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TTCBS</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procmisc</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runread-method" class="method-detail ">
				<a name="M000016"></a>

				<div class="method-heading">
				
					<span class="method-name">runread</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of read command
</p>
					

					
					<div class="method-source-code"
						id="runread-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 124</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runread</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runread-method" class="method-detail ">
				<a name="M000037"></a>

				<div class="method-heading">
				
					<span class="method-name">runread</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of read command
</p>
					

					
					<div class="method-source-code"
						id="runread-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 119</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runread</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runread-method" class="method-detail ">
				<a name="M000049"></a>

				<div class="method-heading">
				
					<span class="method-name">runread</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of read command
</p>
					

					
					<div class="method-source-code"
						id="runread-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 127</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runread</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runread-method" class="method-detail ">
				<a name="M000027"></a>

				<div class="method-heading">
				
					<span class="method-name">runread</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of read command
</p>
					

					
					<div class="method-source-code"
						id="runread-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 102</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runread</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runread-method" class="method-detail ">
				<a name="M000005"></a>

				<div class="method-heading">
				
					<span class="method-name">runread</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of read command
</p>
					

					
					<div class="method-source-code"
						id="runread-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 87</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runread</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procread</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runremove-method" class="method-detail ">
				<a name="M000017"></a>

				<div class="method-heading">
				
					<span class="method-name">runremove</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of remove command
</p>
					

					
					<div class="method-source-code"
						id="runremove-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 151</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runremove</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runremove-method" class="method-detail ">
				<a name="M000006"></a>

				<div class="method-heading">
				
					<span class="method-name">runremove</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of remove command
</p>
					

					
					<div class="method-source-code"
						id="runremove-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 107</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runremove</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runremove-method" class="method-detail ">
				<a name="M000038"></a>

				<div class="method-heading">
				
					<span class="method-name">runremove</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of remove command
</p>
					

					
					<div class="method-source-code"
						id="runremove-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 146</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runremove</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runremove-method" class="method-detail ">
				<a name="M000050"></a>

				<div class="method-heading">
				
					<span class="method-name">runremove</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of remove command
</p>
					

					
					<div class="method-source-code"
						id="runremove-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 154</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runremove</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runremove-method" class="method-detail ">
				<a name="M000028"></a>

				<div class="method-heading">
				
					<span class="method-name">runremove</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of remove command
</p>
					

					
					<div class="method-source-code"
						id="runremove-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 129</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runremove</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procremove</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runwrite-method" class="method-detail ">
				<a name="M000004"></a>

				<div class="method-heading">
				
					<span class="method-name">runwrite</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of write command
</p>
					

					
					<div class="method-source-code"
						id="runwrite-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 64</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runwrite</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">rnum</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runwrite-method" class="method-detail ">
				<a name="M000035"></a>

				<div class="method-heading">
				
					<span class="method-name">runwrite</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of write command
</p>
					

					
					<div class="method-source-code"
						id="runwrite-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 65</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runwrite</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">bnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">apow</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">fpow</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">opts</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">as</span> = <span class="ruby-keyword kw">false</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tl&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TLARGE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-td&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TDEFLATE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tb&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TBZIP</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tt&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TTCBS</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">HDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-as&quot;</span>
        <span class="ruby-identifier">as</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bnum</span>
      <span class="ruby-identifier">bnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">apow</span>
      <span class="ruby-identifier">apow</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fpow</span>
      <span class="ruby-identifier">fpow</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">bnum</span> = <span class="ruby-identifier">bnum</span> <span class="ruby-value">? </span><span class="ruby-identifier">bnum</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">apow</span> = <span class="ruby-identifier">apow</span> <span class="ruby-value">? </span><span class="ruby-identifier">apow</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">fpow</span> = <span class="ruby-identifier">fpow</span> <span class="ruby-value">? </span><span class="ruby-identifier">fpow</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>, <span class="ruby-identifier">as</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runwrite-method" class="method-detail ">
				<a name="M000048"></a>

				<div class="method-heading">
				
					<span class="method-name">runwrite</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of write command
</p>
					

					
					<div class="method-source-code"
						id="runwrite-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 65</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runwrite</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">bnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">apow</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">fpow</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">opts</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">iflags</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tl&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TLARGE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-td&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TDEFLATE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tb&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TBZIP</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tt&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TTCBS</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-ip&quot;</span>
        <span class="ruby-identifier">iflags</span> <span class="ruby-operator">|=</span> <span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-is&quot;</span>
        <span class="ruby-identifier">iflags</span> <span class="ruby-operator">|=</span> <span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-in&quot;</span>
        <span class="ruby-identifier">iflags</span> <span class="ruby-operator">|=</span> <span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">2</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-it&quot;</span>
        <span class="ruby-identifier">iflags</span> <span class="ruby-operator">|=</span> <span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">3</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-if&quot;</span>
        <span class="ruby-identifier">iflags</span> <span class="ruby-operator">|=</span> <span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">4</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">TDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bnum</span>
      <span class="ruby-identifier">bnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">apow</span>
      <span class="ruby-identifier">apow</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fpow</span>
      <span class="ruby-identifier">fpow</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">bnum</span> = <span class="ruby-identifier">bnum</span> <span class="ruby-value">? </span><span class="ruby-identifier">bnum</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">apow</span> = <span class="ruby-identifier">apow</span> <span class="ruby-value">? </span><span class="ruby-identifier">apow</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">fpow</span> = <span class="ruby-identifier">fpow</span> <span class="ruby-value">? </span><span class="ruby-identifier">fpow</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">iflags</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runwrite-method" class="method-detail ">
				<a name="M000026"></a>

				<div class="method-heading">
				
					<span class="method-name">runwrite</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of write command
</p>
					

					
					<div class="method-source-code"
						id="runwrite-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 64</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runwrite</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">width</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">limsiz</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">FDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">width</span>
      <span class="ruby-identifier">width</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">limsiz</span>
      <span class="ruby-identifier">limsiz</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">width</span> = <span class="ruby-identifier">width</span> <span class="ruby-value">? </span><span class="ruby-identifier">width</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">limsiz</span> = <span class="ruby-identifier">limsiz</span> <span class="ruby-value">? </span><span class="ruby-identifier">limsiz</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">width</span>, <span class="ruby-identifier">limsiz</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="runwrite-method" class="method-detail ">
				<a name="M000013"></a>

				<div class="method-heading">
				
					<span class="method-name">runwrite</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
parse arguments of write command
</p>
					

					
					<div class="method-source-code"
						id="runwrite-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 65</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">runwrite</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">rnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">lmemb</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">nmemb</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">bnum</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">apow</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">fpow</span> = <span class="ruby-keyword kw">nil</span>
  <span class="ruby-identifier">opts</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">omode</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^-/</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tl&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TLARGE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-td&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TDEFLATE</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tb&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TBZIP</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-tt&quot;</span>
        <span class="ruby-identifier">opts</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">TTCBS</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nl&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">ONOLCK</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-nb&quot;</span>
        <span class="ruby-identifier">omode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">BDB</span><span class="ruby-operator">::</span><span class="ruby-constant">OLCKNB</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">usage</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span>
      <span class="ruby-identifier">rnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">lmemb</span>
      <span class="ruby-identifier">lmemb</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">nmemb</span>
      <span class="ruby-identifier">nmemb</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">bnum</span>
      <span class="ruby-identifier">bnum</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">apow</span>
      <span class="ruby-identifier">apow</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fpow</span>
      <span class="ruby-identifier">fpow</span> = <span class="ruby-constant">ARGV</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">usage</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword kw">end</span>
  <span class="ruby-identifier">usage</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rnum</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rnum</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">lmemb</span> = <span class="ruby-identifier">lmemb</span> <span class="ruby-value">? </span><span class="ruby-identifier">lmemb</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">nmemb</span> = <span class="ruby-identifier">nmemb</span> <span class="ruby-value">? </span><span class="ruby-identifier">nmemb</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">bnum</span> = <span class="ruby-identifier">bnum</span> <span class="ruby-value">? </span><span class="ruby-identifier">bnum</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">apow</span> = <span class="ruby-identifier">apow</span> <span class="ruby-value">? </span><span class="ruby-identifier">apow</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">fpow</span> = <span class="ruby-identifier">fpow</span> <span class="ruby-value">? </span><span class="ruby-identifier">fpow</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>
  <span class="ruby-identifier">rv</span> = <span class="ruby-identifier">procwrite</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rnum</span>, <span class="ruby-identifier">lmemb</span>, <span class="ruby-identifier">nmemb</span>, <span class="ruby-identifier">bnum</span>, <span class="ruby-identifier">apow</span>, <span class="ruby-identifier">fpow</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">omode</span>)
  <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="usage-method" class="method-detail ">
				<a name="M000011"></a>

				<div class="method-heading">
				
					<span class="method-name">usage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print the usage and exit
</p>
					

					
					<div class="method-source-code"
						id="usage-source">
<pre>
<span class="ruby-comment cmt"># File tcbtest.rb, line 43</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: test cases of the B+ tree database API\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;usage:\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s write [-tl] [-td|-tb|-tt] [-nl|-nb] path rnum&quot;</span> <span class="ruby-operator">+</span>
                <span class="ruby-value str">&quot; [lmemb [nmemb [bnum [apow [fpow]]]]]\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s read [-nl|-nb] path\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s remove [-nl|-nb] path\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s misc [-tl] [-td|-tb|-tt] [-nl|-nb] path rnum\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-identifier">exit</span>(<span class="ruby-value">1</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="usage-method" class="method-detail ">
				<a name="M000024"></a>

				<div class="method-heading">
				
					<span class="method-name">usage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print the usage and exit
</p>
					

					
					<div class="method-source-code"
						id="usage-source">
<pre>
<span class="ruby-comment cmt"># File tcftest.rb, line 43</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: test cases of the fixed-length database API\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;usage:\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s write [-nl|-nb] path rnum [width [limsiz]]\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s read [-nl|-nb] path\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s remove [-nl|-nb] path\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s misc [-nl|-nb] path rnum\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-identifier">exit</span>(<span class="ruby-value">1</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="usage-method" class="method-detail ">
				<a name="M000033"></a>

				<div class="method-heading">
				
					<span class="method-name">usage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print the usage and exit
</p>
					

					
					<div class="method-source-code"
						id="usage-source">
<pre>
<span class="ruby-comment cmt"># File tchtest.rb, line 43</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: test cases of the hash database API\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;usage:\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s write [-tl] [-td|-tb|-tt] [-nl|-nb] [-as] path rnum&quot;</span> <span class="ruby-operator">+</span>
                <span class="ruby-value str">&quot; [bnum [apow [fpow]]]\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s read [-nl|-nb] path\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s remove [-nl|-nb] path\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s misc [-tl] [-td|-tb|-tt] [-nl|-nb] path rnum\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-identifier">exit</span>(<span class="ruby-value">1</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="usage-method" class="method-detail ">
				<a name="M000002"></a>

				<div class="method-heading">
				
					<span class="method-name">usage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print the usage and exit
</p>
					

					
					<div class="method-source-code"
						id="usage-source">
<pre>
<span class="ruby-comment cmt"># File tcatest.rb, line 43</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: test cases of the abstract database API\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;usage:\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s write name rnum\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s read name\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s remove name\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s misc name rnum\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-identifier">exit</span>(<span class="ruby-value">1</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="usage-method" class="method-detail ">
				<a name="M000046"></a>

				<div class="method-heading">
				
					<span class="method-name">usage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
print the usage and exit
</p>
					

					
					<div class="method-source-code"
						id="usage-source">
<pre>
<span class="ruby-comment cmt"># File tcttest.rb, line 43</span>
<span class="ruby-keyword kw">def</span> <span class="ruby-identifier">usage</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%s: test cases of the table database API\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;usage:\n&quot;</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s write [-tl] [-td|-tb|-tt] [-ip|-is|-in|-it|-if] [-nl|-nb] path rnum&quot;</span> <span class="ruby-operator">+</span>
                <span class="ruby-value str">&quot; [bnum [apow [fpow]]]\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s read [-nl|-nb] path\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s remove [-nl|-nb] path\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;  %s misc [-tl] [-td|-tb|-tt] [-nl|-nb] path rnum\n&quot;</span>, <span class="ruby-identifier">$progname</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
  <span class="ruby-identifier">exit</span>(<span class="ruby-value">1</span>)
<span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

